+I(socXpart1*med12)
+I(socXpart1*med13)
+I(socXpart1*med21)
+I(socXpart1*med23)
+I(socXpart1*med31)
+I(socXpart1*med32)
+I(socXpart2*med12)
+I(socXpart2*med13)
+I(socXpart2*med21)
+I(socXpart2*med23)
+I(socXpart2*med31)
+I(socXpart2*med32)
+I(socXpart3*med12)
+I(socXpart3*med13)
+I(socXpart3*med21)
+I(socXpart3*med23)
+I(socXpart3*med31)
+I(socXpart3*med32)
+I(socXpart1*med12):socXpar
+I(socXpart1*med13):socXpar
+I(socXpart1*med21):socXpar
+I(socXpart1*med23):socXpar
+I(socXpart1*med31):socXpar
+I(socXpart1*med32):socXpar
+I(socXpart2*med12):socXpar
+I(socXpart2*med13):socXpar
+I(socXpart2*med21):socXpar
+I(socXpart2*med23):socXpar
+I(socXpart2*med31):socXpar
+I(socXpart2*med32):socXpar
+I(socXpart3*med12):socXpar
+I(socXpart3*med13):socXpar
+I(socXpart3*med21):socXpar
+I(socXpart3*med23):socXpar
+I(socXpart3*med31):socXpar
+I(socXpart3*med32):socXpar
,data=dat)
binmod<-lm(threat~socialism
+parties
+area
+(socXpart1:socXpar)
+(socXpart2:socXpar)
+(socXpart3:socXpar)
+I(socXpart1*med12)
+I(socXpart1*med13)
+I(socXpart1*med21)
+I(socXpart1*med23)
+I(socXpart1*med31)
+I(socXpart1*med32)
+I(socXpart2*med12)
+I(socXpart2*med13)
+I(socXpart2*med21)
+I(socXpart2*med23)
+I(socXpart2*med31)
+I(socXpart2*med32)
+I(socXpart3*med12)
+I(socXpart3*med13)
+I(socXpart3*med21)
+I(socXpart3*med23)
+I(socXpart3*med31)
+I(socXpart3*med32)
+I(socXpart1*med12):socXpar
+I(socXpart1*med13):socXpar
+I(socXpart1*med21):socXpar
+I(socXpart1*med23):socXpar
+I(socXpart1*med31):socXpar
+I(socXpart1*med32):socXpar
+I(socXpart2*med12):socXpar
+I(socXpart2*med13):socXpar
+I(socXpart2*med21):socXpar
+I(socXpart2*med23):socXpar
+I(socXpart2*med31):socXpar
+I(socXpart2*med32):socXpar
+I(socXpart3*med12):socXpar
+I(socXpart3*med13):socXpar
+I(socXpart3*med21):socXpar
+I(socXpart3*med23):socXpar
+I(socXpart3*med31):socXpar
+I(socXpart3*med32):socXpar
,data=dat)
stargazer(binmod)
binmod<-lm(threat~socialism
+parties
+area
+(socXpart1:socXpar)
+(socXpart2:socXpar)
+(socXpart3:socXpar)
+I(socXpart1*med12)
+I(socXpart1*med13)
+I(socXpart1*med21)
+I(socXpart1*med23)
+I(socXpart1*med31)
+I(socXpart1*med32)
+I(socXpart2*med12)
+I(socXpart2*med13)
+I(socXpart2*med21)
+I(socXpart2*med23)
+I(socXpart2*med31)
+I(socXpart2*med32)
+I(socXpart3*med12)
+I(socXpart3*med13)
+I(socXpart3*med21)
+I(socXpart3*med23)
+I(socXpart3*med31)
+I(socXpart3*med32)
+I(socXpart1*med12):socXpar
+I(socXpart1*med13):socXpar
+I(socXpart1*med21):socXpar
+I(socXpart1*med23):socXpar
+I(socXpart1*med31):socXpar
+I(socXpart1*med32):socXpar
+I(socXpart2*med12):socXpar
+I(socXpart2*med13):socXpar
+I(socXpart2*med21):socXpar
+I(socXpart2*med23):socXpar
+I(socXpart2*med31):socXpar
+I(socXpart2*med32):socXpar
+I(socXpart3*med12):socXpar
+I(socXpart3*med13):socXpar
+I(socXpart3*med21):socXpar
+I(socXpart3*med23):socXpar
+I(socXpart3*med31):socXpar
+I(socXpart3*med32):socXpar
,data=dat)
}
1=1
boxmod
binmod
med12
binmod2<-lm(threat~socialism
+parties
+area
+(socXpart1:socXpar)
+(socXpart2:socXpar)
+(socXpart3:socXpar)
+I(socXpart1*med12)
+I(socXpart2*med12)
+I(socXpart1*med13):socXpar
+I(socXpart1*med21):socXpar
+I(socXpart1*med23):socXpar
+I(socXpart1*med31):socXpar
+I(socXpart1*med32):socXpar
+I(socXpart2*med12):socXpar
+I(socXpart2*med13):socXpar
+I(socXpart2*med21):socXpar
+I(socXpart2*med23):socXpar
+I(socXpart2*med31):socXpar
+I(socXpart2*med32):socXpar
+I(socXpart3*med12):socXpar
+I(socXpart3*med13):socXpar
+I(socXpart3*med21):socXpar
+I(socXpart3*med23):socXpar
+I(socXpart3*med31):socXpar
+I(socXpart3*med32):socXpar
,data=dat)
binmod2
binmod2<-lm(threat~socialism
+parties
+area
+(socXpart1:socXpar)
+(socXpart2:socXpar)
+(socXpart3:socXpar)
+I(socXpart1*med12)
+I(socXpart2*med12)
,data=dat)
binmod2
summary(binmod2)
rm(list = ls())
require(MASS)
library(faraway)
data(ozone, package ="faraway")
modozone<-lm(O3~temp+humidity+ibh, data=ozone)
boxcox(modozone, plotit=T)
boxcox(modozone, lambda=seq(.1,.5, by=.1))
boxcox(modozone, lambda=seq(.1,.5, by=.1), optimize=T)
boxcox(modozone, lambda=seq(.1,.5, by=.1), optimize=F)
boxcox(modozone, lambda=seq(.1,.5, by=.1), optimize=F)
boxcox(modozone, lambda=seq(.15,.45, by=.05), optimize=F)
summary(boixmod2)
dat <- read.table("C:/Users/zoeja/OneDrive/Documents/Spring2018/QPM 1/Week9/boix.txt", header=T)
dat<-dat[-18,]
data(dat, package = "faraway")
boixmod<-lm(threshold~threat+ethnic+area+(ethnic:area), data=dat)
boixmod2<-lm(threshold~threat+ethnic:area, data=dat)
summary(boixmod)
boixmod
plot(boixmod)
dev.off()
plot(boixmod)
dev.off()
plot()
plot(type="n")
confint(boixmod)
plot(0, type="n")
lines(confint(boixmod))
plot(boixmod, type="n")
dev.off()
plot(boixmod, type="n")
boixmod
dev.off()
plot(0, type="n", xlim = c(-50,50))
lines(confint(boixmod))
lines(boixmod)
Angell
mod1<-lm(moral~hetero+mobility+region, data=Angell)
mod1
summary(mod1)
boxcox(mod1)
boxcox(mod1, lambda = seq(0,2,.1))
Angell
boxcox(lm(moral~hetero, data=Angell))
boxcox(lm(moral~mobility, data=Angell))
boxcox(lm(moral~region, data=Angell))
mod1<-lm(moral~hetero+mobility+region, data=Angell)
summary(mod1)
mod1
modr<-lm(moral~region, data=Angell))
modr<-lm(moral~region, data=Angell)
modr<-lm(moral~poly(region, 2), data=Angell)
modr<-lm(moral~poly(mobility, 2), data=Angell)
modr
summary(modr)
modr<-lm(moral~poly(mobility, 4), data=Angell)
summary(modr)
library(foreign)
library(interflex)
path <- "C:/Users/zoeja/OneDrive/Documents/Spring2018/QPM 1/Week9"
graphpath<-paste(path,"Graphs/",sep="")
source(paste(path,"Code/hmx.R",sep=""))
name<-"adams_2006"
d<-na.omit(read.dta(paste0(path,"Data/Adams_et_al_AJPS_2006/rep_adams_2006.dta")))
d<-na.omit(read.dta(paste0(path,"C:/Users/zoeja/OneDrive/Documents/Spring2018/QPM 1/Week9")))
d<-na.omit(read.dta(paste0(path,"C:\Users\zoeja\OneDrive\Documents\Spring2018\QPM 1\Week9/rep_adams_2006.dta")))
d<-na.omit(read.dta(paste0(path,"C:/Users/zoeja/OneDrive/Documents/Spring2018/QPM 1/Week9/rep_adams_2006.dta")))
d<-na.omit(read.dta(paste0(path,"/rep_adams_2006.dta")))
head(d)
dim(d)
Y="pshift2" # change in ideological shift
D="idparty" # niche party
X="vshift" # public opinion shift
Z<-c("pshiftt12","votec1","pvoteshift","Italy","Britain","Greece","Luxembourg","Denmark","Netherlands","Spain")
Xlabel<-"Public Opinion Shift"
Ylabel<-"Policy Shift"
Dlabel<-"Niche Party"
main<-"Adams et al. (2006)\n AJPS"
vartype<-NULL; cl<-NULL; time<-NULL; FE = NULL;
table(d[,D])
table(d[,X])
replicate(d,Y=Y,X=X,D=D,Z=Z)
set.seed(1234)
plot.all(data=d, graphpath=graphpath, name=name, main=main,smooth=1,
Y=Y, D=D, X=X, Z=Z,
Ylabel=Ylabel, Dlabel=Dlabel, Xlabel=Xlabel,
vartype=vartype, cl=cl, time=time, pairwise=0,
bandwidth=1.007, smooth.lim=c(-2,2.8))
plot(data=d, graphpath=graphpath, name=name, main=main,smooth=1,
Y=Y, D=D, X=X, Z=Z,
Ylabel=Ylabel, Dlabel=Dlabel, Xlabel=Xlabel,
vartype=vartype, cl=cl, time=time, pairwise=0,
bandwidth=1.007, smooth.lim=c(-2,2.8))
replicate(d,Y=Y,X=X,D=D,Z=Z)
Y="pshift2" # change in ideological shift
D="idparty" # niche party
X="vshift" # public opinion shift
Z<-c("pshiftt12","votec1","pvoteshift","Italy","Britain","Greece","Luxembourg","Denmark","Netherlands","Spain")
Xlabel<-"Public Opinion Shift"
Ylabel<-"Policy Shift"
Dlabel<-"Niche Party"
main<-"Adams et al. (2006)\n AJPS"
vartype<-NULL; cl<-NULL; time<-NULL; FE = NULL;
table(d[,D])
table(d[,X])
replicate(d,Y=Y,X=X,D=D,Z=Z)
plot(data=d, graphpath=graphpath, name=name, main=main,smooth=1,
Y=Y, D=D, X=X, Z=Z,
Ylabel=Ylabel, Dlabel=Dlabel, Xlabel=Xlabel,
vartype=vartype, cl=cl, time=time, pairwise=0,
bandwidth=1.007, smooth.lim=c(-2,2.8))
plot(x=d, graphpath=graphpath, name=name, main=main,smooth=1,
Y=Y, D=D, X=X, Z=Z,
Ylabel=Ylabel, Dlabel=Dlabel, Xlabel=Xlabel,
vartype=vartype, cl=cl, time=time, pairwise=0,
bandwidth=1.007, smooth.lim=c(-2,2.8))
dev.off()
plot(x=d, graphpath=graphpath, name=name, main=main,smooth=1,
Y=Y, D=D, X=X, Z=Z,
Ylabel=Ylabel, Dlabel=Dlabel, Xlabel=Xlabel,
vartype=vartype, cl=cl, time=time, pairwise=0,
bandwidth=1.007, smooth.lim=c(-2,2.8))
dev.off()
dat$threat
dat$threshold
dat <- read.table("C:/Users/zoeja/OneDrive/Documents/Spring2018/QPM 1/Week9/boix.txt", header=T)
dat<-dat[-18,]
dat$areadum<-as.numeric(10^dat$area<=450)
inter.binning(Y="dat$threshold",D="dat$parties",X="dat$socialism",Z=c("dat$threat",
"dat$socialism",
"dat$parties",
"dat$area"),Ylabel=Ylabel, Xlabel=Xlabel, Dlabel=Dlabel,
data=d, ylim = c(-0.18, 0.5), var = vartype)
vartype<-"robust"
inter.binning(Y="dat$threshold",D="dat$parties",X="dat$socialism",Z=c("dat$threat",
"dat$socialism",
"dat$parties",
"dat$area"),Ylabel="Threshold",
Xlabel="socialism", Dlabel="parties",
data=dat,  var = vartype)
inter.binning(Y="threshold",
D="parties",
X="socialism",
Z=c("threat","socialism","parties","area"),
Ylabel="Threshold",
Xlabel="socialism",
Dlabel="parties",
data=dat,  var = vartype)
inter.binning(Y="threshold",
D="parties",
X="socialism",
Z=c("threat","socialism","parties","area"),
Ylabel="Threshold",
Xlabel="socialism",
Dlabel="parties",
data=dat,  var = vartype)
current.code<-as.package("bradleyterry")
rm(list=ls())
library(devtools)
library(roxygen2)
current.code<-as.package("bradleyterry")
setwd("C:/Users/zoeja/OneDrive/Documents/Spring2018/R/BradelyTerryModel/devtools.bradleyterry/bradleyterry")
current.code<-as.package("bradleyterry")
seq(5:13,1)
seq(7,14,1)
seq(2,11,1)
docjdat2<-c(seq(2,11,1), seq(3,12,1), seq(4,13,1), seq(5,14,1), seq(6,15,1), seq(7,16,1), seq(8,17,1), seq(9,18,1), seq(10,19,1), seq(9,0,1))
docjdat2<-c(seq(2,11,1), seq(3,12,1), seq(4,13,1), seq(5,14,1), seq(6,15,1), seq(7,16,1), seq(8,17,1), seq(9,18,1), seq(10,19,1), seq(9,0,-1))
dataset2<-sdata.frame(sort(rep(seq(1,10),10)), docjdat2, rep(c(0,1,0,1,1),20))
colnames(dataset2)<-c("DocIDi", "DocIDj", "Choose")
rep(c(.3,.6),5)
lambda2<-data.frame(c(10:1),rep(c(.3,.6),5))
colnames(lambda2)<-c('DocId', 'Lambda')
bradleyterry<-function(a,b,id,lambda,dataset){
subsetdata<-dataset[dataset$DocIDi %in% id,]
newlambda<-lambda[lambda$DocId %in% id,]
sumvec<-NULL
lambdavec<-NULL
for(i in subsetdata$DocIDj){
lambdavec<-c(lambdavec,lambda$Lambda[i])
}
for (i in 1:nrow(subsetdata)){
sumunit<-(1/(newlambda$Lambda+lambdavec[i]))
sumvec<-as.vector(c(sumvec,sumunit))
}
summationterm<-sum(sumvec)
output<-(a-1+sum(subsetdata$Choose))/(b+summationterm)
return(output)
}
bradleyterry(1,1,10,lambda2,dataset2)
dataset2<-data.frame(sort(rep(seq(1,10),10)), docjdat2, rep(c(0,1,0,1,1),20))
docjdat2<-c(seq(2,11,1), seq(3,12,1), seq(4,13,1), seq(5,14,1), seq(6,15,1), seq(7,16,1), seq(8,17,1), seq(9,18,1), seq(10,19,1), seq(9,0,-1))
dataset2<-data.frame(sort(rep(seq(1,10),10)), docjdat2, rep(c(0,1,0,1,1),20))
colnames(dataset2)<-c("DocIDi", "DocIDj", "Choose")
lambda2<-data.frame(c(10:1),rep(c(.3,.6),5))
colnames(lambda2)<-c('DocId', 'Lambda')
bradleyterry(1,1,10,lambda2,dataset2)
lambda2<-data.frame(c(10:1),c(.25,.5,.3,.1,.8,.55,.9,0,.75, .1))
View(lambda2)
colnames(lambda2)<-c('DocId', 'Lambda')
bradleyterry(1,1,10,lambda2,dataset2)
docjdat2<-c(seq(2,11,1), seq(3,12,1), seq(4,13,1), seq(5,14,1), seq(6,15,1), seq(7,16,1), seq(8,17,1), seq(9,18,1), seq(10,19,1), seq(9,0,-1))
dataset2<-data.frame(sort(rep(seq(1,10),10)), docjdat2, rep(c(0,1,0,1,1),20))
colnames(dataset2)<-c("DocIDi", "DocIDj", "Choose")
lambda2<-data.frame(c(10:1),c(.25,.5,.3,.1,.8,.55,.9,0,.75, .1))
colnames(lambda2)<-c('DocId', 'Lambda')
View(lambda2)
View(dataset2)
bradleyterry(1,1,id=5,lambda2,dataset2)
bradleyterry<-function(a,b,id,lambda,dataset){
subsetdata<-dataset[dataset$DocIDi %in% id,]
newlambda<-lambda[lambda$DocId %in% id,]
sumvec<-NULL
lambdavec<-NULL
for(i in subsetdata$DocIDj){
lambdavec<-c(lambdavec,lambda$Lambda[i])
}
for (i in 1:nrow(subsetdata)){
sumunit<-(1/(newlambda$Lambda+lambdavec[i]))
sumvec<-as.vector(c(sumvec,sumunit))
}
summationterm<-sum(sumvec)
output<-(a-1+sum(subsetdata$Choose))/(b+summationterm)
return(output)
}
bradleyterry<-function(a,b,id,lambda,dataset){
updatedlambda<-NULL
for (i in id){
subsetdata<-dataset[dataset$DocIDi %in% i,]
newlambda<-lambda[lambda$DocId %in% i,]
sumvec<-NULL
lambdavec<-NULL
for(i in subsetdata$DocIDj){
lambdavec<-c(lambdavec,lambda$Lambda[i])
}
for (i in 1:nrow(subsetdata)){
sumunit<-(1/(newlambda$Lambda+lambdavec[i]))
sumvec<-as.vector(c(sumvec,sumunit))
}
summationterm<-sum(sumvec)
output<-(a-1+sum(subsetdata$Choose))/(b+summationterm)
updatedlambda<-c(updatedlambda,output)}
output<-cbind(id,updatedlambda)
output<-as.data.frame(output)
colnames(output)<-c('DocId','Lambda')
return(output)
}
bradleyterry(1,1,id=5,lambda2,dataset2)
bradleyterry(1,1,id=c(5,3),lambda2,dataset2)
set.seed(42)
runif(10)
runif(10)
runif(10)
set.seed(42)
runif(10)
set.seed(42)
runif(10)
set.seed(69)
sample(win,100)
win<-c(rep(0,10000000000),rep(1,10000000000))
set.seed(69)
sample(win,100)
win<-c(rep(0,10000000000),rep(1,10000000000))
win<-c(rep(0,100000),rep(1,100000))
sample(x=win,100)
set.seed(69)
sample(x=win,100)
win<-c(rep(0,100000),rep(1,100000))
docjdat2<-c(seq(2,11,1), seq(3,12,1), seq(4,13,1), seq(5,14,1), seq(6,15,1), seq(7,16,1), seq(8,17,1), seq(9,18,1), seq(10,19,1), seq(9,0,-1))
set.seed(69)
dataset2<-data.frame(sort(rep(seq(1,10),10)), docjdat2, sample(x=win,100))
colnames(dataset2)<-c("DocIDi", "DocIDj", "Choose")
set.seed(42)
lambda2<-data.frame(c(10:1),runif(10))
colnames(lambda2)<-c('DocId', 'Lambda')
bradleyterry(1,1,10,lambda2,dataset2)
bradleyterry(1,1,1,lambda2,dataset2)
inter.binning(Y="threshold",
D="parties",
X="socialism",
Ylabel="Threshold",
Xlabel="socialism",
Dlabel="parties",
data=dat)
dat <- read.table("C:/Users/zoeja/OneDrive/Documents/Spring2018/QPM 1/Week9/boix.txt", header=T)
dat<-dat[-18,]
dat$areadum<-as.numeric(10^dat$area<=450)
library(interflex)
inter.binning(Y="threshold",
D="parties",
X="socialism",
Ylabel="Threshold",
Xlabel="socialism",
Dlabel="parties",
data=dat)
library(stargazer)
a<-inter.binning(Y="threshold",
D="parties",
X="socialism",
Ylabel="Threshold",
Xlabel="socialism",
Dlabel="parties",
data=dat)
stargazer(a$est.binning)
b<-inter.binning(Y="threshold",
D="socialism",
X="parties",
Ylabel="Threshold",
Xlabel="parties",
Dlabel="socialism",
data=dat)
stargazer(a$est.binning, b$est.binning)
View(dat)
median(dat$ethnic)
dat$ethnic<.21
as.numeric(dat$ethnic<.21)
dat$ethdum<-as.numeric(dat$ethnic<.21)
dat$ethdum[19]
dat$ethdum<-as.numeric(dat$ethnic>.21)
dat[24]
dat[24,]
dat[24,12]
View(dat)
dat[24,12]
dat[23,12]
dat[23,12]<-1
interplot(boixmod, var1="areadum", var2="ethnicdum")
library(interplot)
interplot(boixmod, var1="areadum", var2="ethnicdum")
boixmod<-lm(threshold~threat+ethnic+area+ethnic*areadum, data=dat)
interplot(boixmod, var1="areadum", var2="ethnicdum")
interplot(boixmod, var1="areadum", var2="ethndum")
interplot(boixmod, var1="areadum", var2="ethdum")
interplot(boixmod, var1="area", var2="ethdum")
boixmod5<-lm(threshold~threat+ethnic+area+ethdum*area, data=dat)
interplot(boixmod5, var1="area", var2="ethdum")
interplot(boixmod, var2="areadum", var1="ethnic")+
xlab("Ethnic")+
ylab("Threshold")+
ggtitle("Ethnic Regressed on Threshold conditioned on Area Dummy")
interplot(boixmod5, var1="area", var2="ethdum")
interplot(boixmod5, var1="area", var2="ethdum")+
xlab("Area")+
ylab("Threshold")+
ggtitle("Logged Area Regressed on Threshold conditioned on Ethnic Dummy")
